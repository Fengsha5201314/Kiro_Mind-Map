# API密钥配置成功指南

## 🎉 您的API密钥已验证成功！

根据测试结果，您提供的API密钥 `AIzaSyBMQOtbrfjlO9BZNgkdk4z6VOyfN4Dmob8` 是有效的，并且可以正常调用Gemini API。

## ✅ 已完成的优化

### 1. 模型更新
- **主要模型**: `gemini-2.0-flash-exp` (最新实验版)
- **备用模型**: `gemini-1.5-flash`, `gemini-1.5-pro`, `gemini-pro`
- **智能切换**: 如果主要模型不可用，会自动尝试备用模型

### 2. 增强的错误处理
- **详细日志**: 显示具体使用的模型和调用状态
- **智能重试**: 自动尝试不同模型
- **友好提示**: 提供具体的错误原因和解决方案

### 3. 诊断工具
- **内置测试**: 设置面板中的"测试"按钮
- **实时状态**: 显示网络连接和API密钥状态
- **详细报告**: 提供响应时间和错误详情

## 🚀 现在开始使用

### 第一步：配置API密钥
1. 打开应用: http://localhost:5173/
2. 点击右上角"设置"按钮
3. 在"API密钥配置"中输入您的密钥: `AIzaSyBMQOtbrfjlO9BZNgkdk4z6VOyfN4Dmob8`
4. 点击"保存"
5. 点击"测试"按钮验证（应该显示成功）

### 第二步：生成思维导图
现在您可以使用以下任何方式生成思维导图：

**方式1: 主题生成**
1. 点击"新建思维导图"按钮
2. 选择"主题生成"
3. 输入主题，例如："人工智能的发展历程"
4. 点击"开始生成"

**方式2: 文本输入**
1. 在主页面选择"文本输入"标签
2. 粘贴或输入您的内容
3. 点击"生成思维导图"

**方式3: 文件上传**
1. 在主页面选择"文件上传"标签
2. 拖拽或选择PDF、Word、Markdown文件
3. 系统会自动解析并生成思维导图

## 🔧 如果遇到问题

### 使用诊断工具
1. 打开设置 → API密钥配置
2. 点击"测试"按钮
3. 查看诊断结果：
   - ✅ 网络连接：正常
   - ✅ API密钥：有效
   - 📊 响应时间：显示具体毫秒数

### 查看详细日志
1. 按F12打开开发者工具
2. 切换到"Console"标签
3. 查看详细的调用日志，包括：
   - 使用的模型名称
   - API调用状态
   - 响应内容预览

### 常见问题解决

**如果生成失败：**
1. 检查网络连接是否稳定
2. 确认API配额未用完
3. 尝试简化输入内容
4. 查看控制台日志获取详细错误信息

**如果响应很慢：**
- 这是正常的，AI生成需要一些时间
- 复杂内容可能需要10-30秒
- 系统会显示"生成中..."状态

## 📊 性能优化

### 缓存机制
- 相同内容会使用缓存结果
- 主题生成缓存15分钟
- 内容生成缓存10分钟

### 模型选择
- 优先使用最新的`gemini-2.0-flash-exp`
- 如果不可用，自动降级到稳定版本
- 所有模型都支持中文内容

### 智能重试
- 网络错误自动重试3次
- 模型不可用时自动切换
- 指数退避算法避免频繁请求

## 🎯 使用技巧

1. **主题描述要具体**: "人工智能在医疗领域的应用" 比 "AI" 效果更好
2. **内容结构化**: 有标题、段落的内容生成效果更佳
3. **适当长度**: 建议单次输入1000-5000字符
4. **保存重要结果**: 系统会自动保存到历史记录

## 🔒 安全说明

- API密钥加密存储在本地浏览器
- 不会上传到任何第三方服务器
- 所有AI调用直接连接Google服务
- 可随时删除或更换API密钥

---

**恭喜！您的AI思维导图生成器已完全配置成功，可以开始创作了！** 🎨