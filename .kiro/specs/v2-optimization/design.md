# AI思维导图生成器 v2.0 优化设计文档

## 概述

本文档详细描述了v2.0版本三项核心优化功能的技术设计方案：智能提示词工程、流式生成和多种布局模式。

### 设计目标

1. **提升AI生成质量**：通过智能提示词工程，使生成的思维导图更加结构化和准确
2. **改善用户体验**：通过流式生成，提供实时反馈，减少等待时间
3. **增强视觉表现**：通过多种布局模式，适应不同场景和内容类型

### 技术栈

- **前端框架**：React 18 + TypeScript
- **状态管理**：Zustand
- **AI服务**：Google Gemini API (v1beta)
- **图形渲染**：ReactFlow
- **动画库**：CSS Transitions + RequestAnimationFrame

---

## 架构设计

### 整体架构

`

                        用户界面层                              
           
   输入组件     画布组件     控制组件     设置组件     
           

                            

                        业务逻辑层                              
           
   提示词引擎       流式生成器       布局引擎           
           

                            

                        服务层                                  
           
   Gemini服务      思维导图服务     缓存服务           
           

                            

                        数据层                                  
           
   状态管理         本地存储         历史记录           
           

`

### 模块依赖关系

- **提示词引擎**  Gemini服务
- **流式生成器**  Gemini服务 + 状态管理
- **布局引擎**  思维导图服务 + 画布组件

---

## 功能1：智能提示词工程

### 组件设计

#### 1.1 ContentTypeDetector（内容类型检测器）

**职责**：自动识别输入内容的类型

**接口定义**：
